#dot
strict digraph g {
	node [ shape = box ];
	nodesep = 0.1;
	ranksep = 1;
	
	subgraph cluster_thread_stat {
		label = "ThreadStat";
		node_a_thread_stat_id                   [ label = "*id*" ];
		node_a_thread_stat_age                  [ label = "age" ];
		node_a_thread_stat_post_to_viewer_ratio [ label = "post_to_viewer_ratio" ];
		node_a_thread_stat_popularity_score     [ label = "popularity_score" ];
	}

	subgraph cluster_thread_counter {
		label = "ThreadCounter";
		node_a_thread_counter_id                   [ label = "*id*" ];
		node_a_thread_counter_last_post            [ label = "last_post" ];
		node_a_thread_counter_last_post_time       [ label = "-last_post_time-" ];
		node_a_thread_counter_age                  [ label = "-age-" ];
		node_a_thread_counter_post_number          [ label = "post_number" ];
		node_a_thread_counter_viewer_number        [ label = "viewer_number" ];
		node_a_thread_counter_post_to_viewer_ratio [ label = "-post_to_viewer_ratio-" ];
		node_a_thread_counter_popularity_score     [ label = "-popularity_score-" ];
	}

	subgraph cluster_thread {
		label = "Thread";
		node_a_thread_id                    [ label = "*id*" ];
		node_a_thread_parent                [ label = "parent" ];
		node_a_thread_time                  [ label = "time" ];
	}

	subgraph cluster_board {
		label = "Board";
		node_a_board_id                    [ label = "*id*" ];
	}

	subgraph cluster_post {
		label = "Post";
		node_a_post_id           [ label = "*id*" ];
		node_a_post_parent       [ label = "parent" ];
		node_a_post_time         [ label = "time" ];
	}

	node_a_thread_stat_id -> node_a_thread_counter_id;
	node_a_thread_counter_id -> node_a_thread_id;
	node_a_thread_counter_age -> node_a_thread_stat_age [ style = dashed ];
	node_a_thread_counter_post_to_viewer_ratio -> node_a_thread_stat_post_to_viewer_ratio [ style = dashed];
	node_a_thread_counter_popularity_score -> node_a_thread_stat_popularity_score [ style = dashed];

	node_a_thread_counter_last_post -> node_a_post_id;
	node_a_thread_counter_last_post_time -> node_a_post_time [ style = dashed ];

	node_a_thread_parent -> node_a_board_id;

	node_a_thread_stat_age -> node_a_thread_time [ label = "1+ Now() - time", style = dashed ];
	node_a_thread_stat_popularity_score -> node_a_thread_stat_post_to_viewer_ratio [ style = dashed ];
	node_a_thread_stat_popularity_score -> node_a_thread_stat_age [ style = dashed ];
	node_a_thread_stat_post_to_viewer_ratio -> node_a_thread_counter_post_number [ style = dashed ];
	node_a_thread_stat_post_to_viewer_ratio -> node_a_thread_counter_viewer_number [ style = dashed ];

	node_a_post_parent -> node_a_thread_id;
}
